{"version":3,"file":"simple-gtm.js.map","sources":["ng://simple-gtm/lib/simple-gtm.service.ts","ng://simple-gtm/lib/simple-gtm.component.ts","ng://simple-gtm/lib/simple-gtm.module.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\n\n/**\n * Simple Google Tag Manager Service\n *\n * This service generate a script tag and\n * set trigger a custom events\n *\n * @example\n * import { SimpleGtmService } from 'simple-gtm';\n *\n * constructor(private sgtm: SimpleGtmService) {}\n */\n@Injectable({\n  providedIn: 'root'\n})\nexport class SimpleGtmService {\n\n  private dataLayer = window['dataLayer'] || [];\n\n  /**\n   * @ignore\n   */\n  constructor() { }\n\n  /**\n   * Generate script tag and no script tag\n   * @param gtmId String code\n   */\n  static generate(gtmId: string) {\n    const scriptTagManager = document.createElement('script');\n    const noScriptTagManager = document.createElement('noscript');\n    const iframeTagManager = document.createElement('iframe');\n\n    scriptTagManager.innerHTML = `(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':\n      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],\n      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=\n      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);\n      })(window,document,'script','dataLayer','${gtmId}');`;\n\n    iframeTagManager.src = `https://www.googletagmanager.com/ns.html?id=${gtmId}`;\n    iframeTagManager.height = '0';\n    iframeTagManager.width = '0';\n    iframeTagManager.setAttribute('style', 'display:none;visibility:hidden');\n\n    noScriptTagManager.appendChild(iframeTagManager);\n    document.body.appendChild(noScriptTagManager);\n    document.head.appendChild(scriptTagManager);\n  }\n\n  /**\n   * Push values on dataLayer\n   * @param event reveive a GTM event\n   * @param params receive all params, this object is optional\n   */\n  push(event: string, params?: object) {\n    const obj = {\n      'event': event\n    };\n\n    if (params !== undefined) {\n      Object.entries(params).forEach(([key, value]) => {\n        obj[key] = value;\n      });\n    }\n\n    this.dataLayer.push(obj);\n  }\n}\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'lib-simple-gtm',\n  template: `\n    <p>\n      simple-gtm works!\n    </p>\n  `,\n  styles: []\n})\nexport class SimpleGtmComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { SimpleGtmComponent } from './simple-gtm.component';\n\n@NgModule({\n  declarations: [SimpleGtmComponent],\n  imports: [\n  ],\n  exports: [SimpleGtmComponent]\n})\nexport class SimpleGtmModule { }\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAaA;;;;IAUE;QALQ,cAAS,GAAG,MAAM,CAAC,WAAW,CAAC,IAAI,EAAE,CAAC;KAK7B;;;;;;;;;;IAMV,yBAAQ;;;;;IAAf,UAAgB,KAAa;;YACrB,gBAAgB,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC;;YACnD,kBAAkB,GAAG,QAAQ,CAAC,aAAa,CAAC,UAAU,CAAC;;YACvD,gBAAgB,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC;QAEzD,gBAAgB,CAAC,SAAS,GAAG,wWAIgB,KAAK,QAAK,CAAC;QAExD,gBAAgB,CAAC,GAAG,GAAG,iDAA+C,KAAO,CAAC;QAC9E,gBAAgB,CAAC,MAAM,GAAG,GAAG,CAAC;QAC9B,gBAAgB,CAAC,KAAK,GAAG,GAAG,CAAC;QAC7B,gBAAgB,CAAC,YAAY,CAAC,OAAO,EAAE,gCAAgC,CAAC,CAAC;QAEzE,kBAAkB,CAAC,WAAW,CAAC,gBAAgB,CAAC,CAAC;QACjD,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,kBAAkB,CAAC,CAAC;QAC9C,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,gBAAgB,CAAC,CAAC;KAC7C;;;;;;;;;;;;IAOD,+BAAI;;;;;;IAAJ,UAAK,KAAa,EAAE,MAAe;;YAC3B,GAAG,GAAG;YACV,OAAO,EAAE,KAAK;SACf;QAED,IAAI,MAAM,KAAK,SAAS,EAAE;YACxB,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,OAAO;;;;YAAC,UAAC,EAAY;oBAAZ,kBAAY,EAAX,WAAG,EAAE,aAAK;gBACzC,GAAG,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC;aAClB,EAAC,CAAC;SACJ;QAED,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;KAC1B;;gBAtDF,UAAU,SAAC;oBACV,UAAU,EAAE,MAAM;iBACnB;;;;;2BAfD;CAaA;;;;;;ACbA;IAaE;KAAiB;;;;IAEjB,qCAAQ;;;IAAR;KACC;;gBAdF,SAAS,SAAC;oBACT,QAAQ,EAAE,gBAAgB;oBAC1B,QAAQ,EAAE,kDAIT;iBAEF;;;;IAQD,yBAAC;CAhBD;;;;;;ACFA;IAGA;KAMgC;;gBAN/B,QAAQ,SAAC;oBACR,YAAY,EAAE,CAAC,kBAAkB,CAAC;oBAClC,OAAO,EAAE,EACR;oBACD,OAAO,EAAE,CAAC,kBAAkB,CAAC;iBAC9B;;IAC8B,sBAAC;CANhC;;;;;;;;;;;;;;"}
